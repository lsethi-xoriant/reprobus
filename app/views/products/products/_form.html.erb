
<div class="section">
  <div class="card-panel">
    <% if !@product.new_record? %>
      <div class="col s2 right">
        <%= link_to "Delete", get_show_path(@product), method: :delete,
                                            data: { confirm: "You sure you want to DELETE this #{@product.type}?"}, class: "btn red" %>
      </div>
    <% end %>
    
  <%= form_for @product.becomes(Product), :url => formpath, :html => {:multipart => true, :class => "col s12"} do |f| %>
    <%= render 'shared/error_messages', object: f.object %>
    <%= f.hidden_field :type, :value => f.object.type  %>
  
    <div class="row"><%= render partial: 'shared/material_textfield_cols12', locals: { field: "name", f: f } %></div>
    
    <div class="row">
      <div class="input-field col s6">
        <%= f.select(:country_id, options_for_select([[f.object.country_name, f.object.country_id]],f.object.country_id),{},{class: "select2-countries browser-default"}) %>
        <%= f.label :country_id, "Country",  class: 'active' %>
      </div>
    
      <div class="input-field col s6">
        <%= f.select(:destination_id, options_for_select([[f.object.destination_name, f.object.destination_id]],f.object.destination_id),{},{class: "select2-destinations browser-default"}) %>
        <%= f.label :destination_id, "Destination",  class: 'active' %>
      </div>
    </div>
      
    <div class="row">
      <div class="input-field col s6">
        <%= f.select(:supplier_id, options_for_select([[f.object.supplierName, f.object.supplier_id]],f.object.supplier_id),{},{class: "select2-suppliers browser-default"}) %>
        <%= f.label :supplier_id, "Supplier",  class: 'active' %>
      </div>
    </div>

    <div class="row">
      <div class="input-field col s12">
        <%= f.text_area :description, class: "materialize-textarea" %>
        <%= f.label :description %>
      </div>
    </div>
    
    
    <% if @setting.use_dropbox %>
      <% @setting.dropbox_default_path ? name = "Dropbox File Name (default path: #{@setting.dropbox_default_path} )" : name = "Dropbox File Name" %>
      <div class="row"><%= render partial: 'shared/material_textfield_cols12', locals: { field: "remote_url", f: f, name: name } %></div>
      
      <%= image_tag(@product.get_dropbox_image_link, :class => "product_image") %>

    <% else %>
      <div class="file-field input-field col s12">
        <input class="file-path validate" type="text"/>
        <div class="btn"><span>Image</span>
         <%= f.file_field :image, class: "file-path validate" %>
         <%= f.hidden_field :image_cache %>
        </div>
      </div>
    
      <%= image_tag(@product.image_url(:thumb), :class => "product_image") if @product.image? %>
    <% end %>
    
   
    <% if @product.type == "Hotel" %>
	    
	      <h4 class="header2">Hotel Rooms</h4>
	      <div id="hotel_rooms">
    	  <%= f.fields_for :hotel_rooms, :html => {:class => "col s12"}  do |c| %>
    	    <div class="row">
      	    <%= render partial: 'hotel_room', locals: { f: c } %>
      	  </div>
        <% end %>
  	    
  	    <div class="links">
    	    <div class="row">
    	      <div class="offset-s10 col s2">
              <%= link_to_add_association  f, :hotel_rooms, {partial: 'hotel_room', class: "btn-floating btn-small waves-effect waves-light green right"} do %>
                <i class="mdi-content-add"></i>
              <% end %>
            </div>
          </div>
        </div>
      </div>
    <% end %>

    
    <div class="row">
      <div class="input-field col s12">
       <%= f.submit buttontxt, class: "btn" %>
      </div>
    </div>
  <% end %>
  </div>
</div>
