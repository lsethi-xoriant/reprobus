<% provide(:title, "Edit user") %>
<h4 class="page-header">Update profile</h4>

<div class="row">
  <div class="span6 offset3">
    <%= form_for(@user,:html => {:multipart => true, :class => "form-horizontal"}) do |f| %>
      <%= render 'shared/error_messages', object: f.object %>

      <%= render partial: 'shared/standard_grouped_textfield', locals: { field: "name", f: f } %>
      <%= render partial: 'shared/standard_grouped_textfield', locals: { field: "email", f: f } %>
      <%= render partial: 'shared/standard_grouped_textfield', locals: { field: "phone", f: f } %>

      <div class="row">
        <%= render partial: 'shared/material_textareafield_cols12', locals: { field: "profile_description", f: f, name: "Profile description", ckeditor_field: true } %>
      </div>

      <%= f.fields_for :profile_image, @user.profile_image do |t| %>
        <%= render partial: 'shared/image_field', locals: { imageHolder: @user.profile_image, f: t, title: "Profile Image" } %>
      <% end %>

      <%= render partial: 'shared/std_grp_pw_field', locals: { field: :password, f: f } %>
      <%= render partial: 'shared/std_grp_pw_field', locals: { field: :password_confirmation, f: f } %>
    
      <div class="row">
        <div class="col-sm-4 col-md-offset-4">
          <%= gravatar_for(@user, size: 52) %>
          <a href="http://gravatar.com/emails">change</a>
        </div>
      </div>

      <div class="row">
        <% if current_user.management? %>
          <% @roles.each do |role| %>
            <%= check_box_tag "user[role_ids][]", role.id, f.object.roles.include?(role), id: role.id %>
            <label for="<%= role.id %>"><%= role.name %></label>
          <% end %>
        <% end %>
      </div>
      
      <%= render partial: 'shared/std_grp_btn_pos', locals: { name: "Save changes", f: f } %>
    <% end %>
  </div>
</div>



