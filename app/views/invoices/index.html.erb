<% provide(:title, 'All Bookings') %>
<h1 class="page-header">All Invoices for <%= @booking.name %></h1>

<div class="panel panel-default">
  <div class="panel-heading">
    Customer Invoices
  </div>
  <!-- /.panel-heading -->
  <div class="panel-body">
    <table id="sort_table" class="table table-striped table-bordered table-hover" >
      <thead>
        <tr>
          <th>Invoice ID</th>
          <th>Customer Name</th>
          <th>Email</th>
          <th>Amount</th>
          <th>Org Exch Amt</th>
          <th>CC Paid</th>
          <th>Assigned To</th>
          <th>Status</th>
        </tr>
      </thead>
      <tbody>
        <% @customer_invoices.each do |inv| %>
        <tr>
          <td><%= link_to(inv.id, booking_invoice_path(@booking,inv)) %></td>
          <td><%= link_to(@booking.dasboard_customer_name, @booking.customer) %></td>
          <td><%= @booking.customer.email %></td>
          <td><%= number_to_currency(inv.getTotalAmount, precision: 0) + " " + inv.getCurrencyCode %></td>
          <td><%= number_to_currency(inv.exchange_amount.to_s, precision: 2)  + " " +  Setting.find(1).currencyCode %></td>
          <td><%= number_to_currency(inv.getCCPaidTotal, precision: 0) %></td>
          <td><%= @booking.assigned_to_name %></td>
          <td><%= inv.status %></td>
        </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>

<div class="pull-left"><a href=<%= new_booking_invoice_path @booking %> ><button type="button" class="btn btn-primary">Create Customer Invoice</button></a></div>
<div class="pull-right"><h4>Grand Total Invoices: <%= number_to_currency(@booking.getCustomerInvoicesAmount, precision: 0) %></h4></div>
<br><br><br>

<div class="panel panel-default">
  <div class="panel-heading">
    Supplier Invoices
  </div>
  
  <!-- /.panel-heading -->
  <div class="panel-body">
    <table id="sort_table2" class="table table-striped table-bordered table-hover" >
      <thead>
        <tr>
          <th>Invoice ID</th>
          <th>Supplier Name</th>
          <th>Email</th>
          <th>Amount</th>
          <th>Org Exch Amt</th>
          <th>Assigned To</th>
          <th>Status</th>
        </tr>
      </thead>
      <tbody>
        <% @supplier_invoices.each do |inv| %>
        <tr>
          <td><%= link_to(inv.id, showSupplier_booking_invoices_path(@booking,inv)) %></td>
          <td><%= link_to(inv.getSupplierName, supplier_path(inv.supplier)) if inv.supplier %></td>
          <td><%= @booking.customer.email %></td>
          <td><%= number_to_currency(inv.getTotalAmount, precision: 2) + " " + inv.getCurrencyCode %></td>
          <td><%= number_to_currency(inv.exchange_amount.to_s, precision: 2)  + " " +  Setting.find(1).currencyCode %></td>
          <td><%= @booking.assigned_to_name %></td>
          <td><%= inv.status %></td>
        </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>
<div class="pull-left"><a href=<%= supplierInvoice_booking_invoices_path @booking %> ><button type="button" class="btn btn-primary">Create Supplier Invoice</button></a></div>
<div class="pull-right"><h4>Grand Total Supplier Invoices: <%= number_to_currency(@booking.getSupplierInvoicesAmount, precision: 0) %></h4></div>
<br>
<br>

  
